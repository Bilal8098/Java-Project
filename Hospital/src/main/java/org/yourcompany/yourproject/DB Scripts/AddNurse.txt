CREATE OR REPLACE PROCEDURE AddNurse(
nurName VARCHAR2,
nurpass VARCHAR2,
nurAddress VARCHAR2,
nurDepartment VARCHAR2,
nurAge NUMBER,
nurPhone VARCHAR2,
nurEmail VARCHAR2,
nurSalary NUMBER,
nurShift VARCHAR2
) IS
depId NUMBER;
BEGIN
SELECT DEPTID INTO DEPID
FROM DEPARTMENTS
WHERE DEPTNAME = nurDepartment;
EXECUTE IMMEDIATE 'CREATE USER ' || nurName || ' IDENTIFIED BY ' || nurpass;
EXECUTE IMMEDIATE 'GRANT CONNECT TO ' || nurName;
EXECUTE IMMEDIATE 'GRANT SELECT ON Appointment TO ' || nurName;
EXECUTE IMMEDIATE 'GRANT SELECT ON Inventory TO ' || nurName;
EXECUTE IMMEDIATE 'GRANT INSERT ON PRESCIPTION TO ' || nurName;
EXECUTE IMMEDIATE 'GRANT SELECT ON Rooms TO ' || nurName;

INSERT INTO HospitalUsers(UserName, UserAddress,
UserAge, UserPhone, UserEmail, UserRole)
VALUES (nurName, nurAddress,
nurAge, nurPhone, nurEmail, 'Nurse');

INSERT INTO Nurses(nurseId, DEPTID,
shift, Salary) VALUES(userseq.currval, DEPID,
nurShift, nurSalary);
END;

DECLARE
NAME VARCHAR2(20);
PASSW VARCHAR2(30);
ADDRESS VARCHAR2(50);
DEPT VARCHAR2(20);
AGE NUMBER;
PHONE VARCHAR2(20);
EMAIL VARCHAR2(30);
SALARY NUMBER(10,2);
SHIFT VARCHAR2(30);
BEGIN
    AddNurse(NAME, PASSW, ADDRESS, DEPT, AGE, PHONE, EMAIL, SALARY, SHIFT);
END;