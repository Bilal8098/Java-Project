CREATE OR REPLACE PROCEDURE AddDoctor(
docId NUMBER,
docName VARCHAR2,
passw VARCHAR2,
docAddress VARCHAR2,
docDepartment VARCHAR2,
docAge NUMBER,
docPhone VARCHAR2,
docEmail VARCHAR2,
docSalary NUMBER
)
IS 
BEGIN

EXECUTE IMMEDIATE 'CREATE USER ' || docName || ' IDENTIFIED BY ' || passwpass;
EXECUTE IMMEDIATE 'GRANT CONNECT TO ' || docName;
EXECUTE IMMEDIATE 'GRANT SELECT ON HOSADMIN.Appointment TO ' || docName;
EXECUTE IMMEDIATE 'GRANT SELECT ON HOSADMIN.Inventory TO ' || docName;
EXECUTE IMMEDIATE 'GRANT SELECT ON HOSADMIN.Nurses TO ' || docName;
EXECUTE IMMEDIATE 'GRANT SELECT ON HOSADMIN.Surgery TO ' || docName;
EXECUTE IMMEDIATE 'GRANT SELECT ON HOSADMIN.PatientHistory TO ' || docName;
EXECUTE IMMEDIATE 'GRANT INSERT ON HOSADMIN.PRESCRIPTION TO ' || docName;

INSERT INTO HospitalUsers(UserId, UserName, UserAddress,
UserAge, UserPhone, UserEmail, UserRole)
VALUES (docId, docName, docAddress,
docAge, docPhone, docEmail, 'Doctor');

INSERT INTO DOCTORS(DoctorId, Department, DoctorSalary)
VALUES (docId, docDepartment, docSalary);
END;


DECLARE
ID NUMBER;
NAME VARCHAR2(20);
PASSW VARCHAR2(30);
ADDRESS VARCHAR2(50);
DEPT VARCHAR2(20);
AGE NUMBER;
PHONE VARCHAR2(20);
EMAIL VARCHAR2(30);
SALARY NUMBER(10,2);
BEGIN
    AddDoctor(ID, NAME, PASSW, ADDRESS, DEPT, AGE, PHONE, EMAIL, SALARY);
END;
